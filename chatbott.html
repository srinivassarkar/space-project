<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Space Chatbot</title>
    <style>



#chatbot-icon {
    position: fixed;
    bottom: 20px;
    right: 20px;
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background-color: #1d5be6;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    z-index: 1000;
}

#chatbot-icon img {
    width: 40px;
    height: 40px;
    border-radius: 50%;
}

#chatbot {
    position: fixed;
    bottom: 20px;
    right: 20px;
    width: 350px;
    border: 1px solid #ccc;
    border-radius: 10px;
    box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: #08286e;
    z-index: 1000;
    color: #e0e0e0;
    display: none;
}

#chatbot-header {
    background-color: #162447;
    color: #e0e0e0;
    padding: 15px;
    border-top-left-radius: 10px;
    border-top-right-radius: 10px;
    text-align: center;
    font-size: 18px;
    font-weight: bold;
    position: relative;
}

#chatbot-close {
    position: absolute;
    top: 10px;
    right: 15px;
    cursor: pointer;
    font-size: 20px;
}

#chatbot-body {
    padding: 15px;
    max-height: 400px;
    overflow-y: auto;
}

#chatbot-messages {
    margin-bottom: 10px;
    font-size: 14px;
}

#chatbot-input {
    width: calc(100% - 80px);
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 5px;
    margin-right: 5px;
    font-size: 14px;
    background-color: #0f3460;
    color: #e0e0e0;
    display: inline-block;
    vertical-align: middle;
}

#chatbot-send {
    padding: 10px;
    background-color: #e43f5a;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-size: 14px;
    width: 60px;
    display: inline-block;
    vertical-align: middle;
}

#chatbot-input-container {
    display: flex;
    align-items: center;
}

#chatbot-send:hover {
    background-color: #d63447;
}

#chatbot-header {
    background-color: #162447;
    color: #e0e0e0;
    padding: 15px;
    border-top-left-radius: 10px;
    border-top-right-radius: 10px;
    text-align: center;
    font-size: 18px;
    font-weight: bold;
}

#chatbot-body {
    padding: 15px;
    max-height: 400px;
    overflow-y: auto;
}

#chatbot-messages {
    margin-bottom: 10px;
    font-size: 14px;
}

#chatbot-input {
    width: calc(100% - 80px);
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 5px;
    margin-right: 5px;
    font-size: 14px;
    background-color: #0f3460;
    color: #e0e0e0;
}

#chatbot-send {
    padding: 10px;
    background-color: #e43f5a;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-size: 14px;
    width: 60px;
}

#chatbot-send:hover {
    background-color: #d63447;
}




    </style>
  </head>
  <body>
    <div id="chatbot-icon" onclick="openChatbot()">
      <img
        src="https://miro.medium.com/v2/resize:fit:750/format:webp/1*C_LFPy6TagD1SEN5SwmVRQ.jpeg"
        alt="Chatbot"
      />
    </div>
    <div id="chatbot" style="display: none">
      <div id="chatbot-header">
        Space Chatbot
        <span id="chatbot-close" onclick="closeChatbot()">Ã—</span>
      </div>

      <div id="chatbot-body">
        <div id="chatbot-messages"></div>
        <div id="chatbot-input-container">
          <input
            type="text"
            id="chatbot-input"
            placeholder="Ask me about space..."
          />
          <button id="chatbot-send">Send</button>
        </div>
      </div>
    </div>
    <script >

function sendMessage(message) {
      parent.postMessage(message, '*');
    }



function openChatbot() {
    document.getElementById('chatbot').style.display = 'block';
    document.getElementById('chatbot-icon').style.display = 'none';
}

function closeChatbot() {
    document.getElementById('chatbot').style.display = 'none';
    document.getElementById('chatbot-icon').style.display = 'flex';
}

document.addEventListener('DOMContentLoaded', function() {
    const chatbotSendButton = document.getElementById('chatbot-send');
    const chatbotInput = document.getElementById('chatbot-input');
    const chatbotMessages = document.getElementById('chatbot-messages');

    chatbotSendButton.addEventListener('click', async function() {
        const userMessage = chatbotInput.value;
        if (userMessage.trim() === '') return;

        // Display user message
        const userMessageElement = document.createElement('div');
        userMessageElement.textContent = 'You: ' + userMessage;
        chatbotMessages.appendChild(userMessageElement);

        // Clear input
        chatbotInput.value = '';

        // Fetch response from API
        const url = 'https://llama-ai-mixtral-cohere-gpt-api.p.rapidapi.com/nllama3';
        const options = {
            method: 'POST',
            headers: {
                'x-rapidapi-key': '686b666f7bmsh4b17f9c4de554c2p176d21jsn9da5540d2064',
                'x-rapidapi-host': 'llama-ai-mixtral-cohere-gpt-api.p.rapidapi.com',
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                messages: [
                    {
                        role: 'user',
                        content: userMessage
                    }
                ],
                web_access: false,
                consider_chat_history: true,
                system_prompt: '',
                conversation_id: ''
            })
        };

        try {
            const response = await fetch(url, options);
            const result = await response.text();
            console.log('API Response:', result);

            // Display bot response
            const botMessageElement = document.createElement('div');
            const responseJson = JSON.parse(result);
            const botResponse = responseJson.result;
            botMessageElement.textContent = 'Bot: ' + botResponse;
            chatbotMessages.appendChild(botMessageElement);
        } catch (error) {
            console.error(error);
            const errorMessageElement = document.createElement('div');
            errorMessageElement.textContent = 'Bot: Sorry, something went wrong.';
            chatbotMessages.appendChild(errorMessageElement);
        }
    });
});












    </script>
  </body>
</html>
